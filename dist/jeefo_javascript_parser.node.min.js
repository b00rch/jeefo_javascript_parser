/**
 * jeefo_javascript_parser : v0.0.7
 * Author                  : je3f0o, <je3f0o@gmail.com>
 * Homepage                : https://github.com/je3f0o/jeefo_javascript_parser
 * License                 : The MIT License
 * Copyright               : 2017
 **/
"use strict";module.exports=function(e){return e.use(function(e){var t=e.module("jeefo_javascript_parser",["jeefo_tokenizer"]);t.namespace("parser.SymbolsTable",["object.assign","JeefoObject"],function(e,t){var n=function(e){this.is=e.is,this.Token=function(){}};n.prototype={assign:e,inherit:function(e,t){this.assign(this.Token.prototype,e,t)}};var r=function(e,n,r){this.constructors=e||new t,this.statement_symbols=r||new t,this.expression_symbols=n||new t};return r.prototype={assign:e,Handler:n,SymbolsTable:r,handler:function(e){return new this.Handler(e)},sort_handler:function(e,t){return e.Token.prototype.precedence-t.Token.prototype.precedence},copy:function(){return new this.SymbolsTable(this.constructors.$copy(),this.expression_symbols.$copy(),this.statement_symbols.$copy())},register_constructor:function(e,t,n){return this.constructors[e]=t,this.assign(t.prototype,this.expression_default_prototypes,n),t.prototype.type=e,t.prototype.on_register&&t.prototype.on_register(t.prototype,this),this},register_expression:function(e,t,n){var r=this.handler(t);return r.inherit(this.expression_default_prototypes,t.protos),void 0===n?r.Token.prototype.type+="Expression":n&&(r.Token.prototype.type+=n),this.constructors[r.Token.prototype.type]=r.Token,r.Token.prototype.on_register&&r.Token.prototype.on_register(r.Token.prototype,this),this.expression_symbols.hasOwnProperty(e)?(this.expression_symbols[e].push(r),this.expression_symbols[e].sort(this.sort_handler)):this.expression_symbols[e]=[r],this},register_statement:function(e,t){var n=this.handler(t);return n.inherit(this.statement_default_prototypes,t.protos),void 0===t.suffix?n.Token.prototype.type+="Statement":t.suffix&&(n.Token.prototype.type+=t.suffix),this.constructors[n.Token.prototype.type]=n.Token,n.Token.prototype.on_register&&n.Token.prototype.on_register(n.Token.prototype,this),this.statement_symbols.hasOwnProperty(e)?(this.statement_symbols[e].push(n),this.statement_symbols[e].sort(this.sort_handler)):this.statement_symbols[e]=[n],this},get_expression:function(e,t,n){var r=this.expression_symbols[t[n].type];if(r)for(var s=r.length-1;s>=0;--s)if(!r[s].is||r[s].is(t[n],t,n)){var i=new r[s].Token;return i.initialize&&i.initialize(t,n,e),i}},get_statement:function(e,t,n){var r=e.current_expression,s=this.statement_symbols[r.type];if(s)for(var i=s.length-1;i>=0;--i)if(!s[i].is||s[i].is(r,t,n))return r=new s[i].Token,r.initialize&&r.initialize(t,n,e),r},expression_default_prototypes:{type:"Undefined",precedence:0,null_denotation:function(){return this},left_denotation:function(){return this}},statement_default_prototypes:{type:"Undefined",precedence:3}},r}),t.namespace("javascript.SymbolsTable",["JeefoObject","object.assign","parser.SymbolsTable"],function(e,t,n){var r=function(e,t,n){var r=t+1;this.type=this.type,this.name=e[t].value;e:for(;r<e.length;++r)switch(e[r].type){case"Number":case"Identifier":if(e[r-1].end.index!==e[r].start.index)break e;this.name+=e[r].value;break;case"SpecialCharacter":switch(e[r].value){case"$":case"_":if(e[r-1].end.index!==e[r].start.index)break e;this.name+=e[r].value;break;default:break e}break;default:break e}this.start=e[t].start,this.end=e[r-1].end,n.token_index=r-1},s=function(t,n,s,i){var a;if(this.constructors=t||new e,this.named_symbols=i||new e,this.statement_symbols=s||new e,this.expression_symbols=n||new e,this.expression_symbols.Identifier)for(a=this.expression_symbols.Identifier.length-1;a>=0;--a)if(21===this.expression_symbols.Identifier[a].precedence){this.expression_symbols.Identifier.splice(a,1);break}if(this.expression_symbols.SpecialCharacter)for(a=this.expression_symbols.SpecialCharacter.length-1;a>=0;--a)if(21===this.expression_symbols.SpecialCharacter[a].precedence){this.expression_symbols.SpecialCharacter.splice(a,1);break}this.declaration_expression("Identifier",{suffix:!1,protos:{type:"Identifier",names:this.named_symbols,precedence:21,initialize:r,null_denotation:function(e){return this.names.hasOwnProperty(this.name)?this.names[this.name].null_denotation(this,e):this},left_denotation:function(e,t){return this.names.hasOwnProperty(this.name)?(this.names[this.name].left_denotation,this.names[this.name].left_denotation(e,t)):this}}}).declaration_expression("SpecialCharacter",{is:function(e){return"$"===e.value||"_"===e.value},suffix:!1,protos:{type:"Identifier",precedence:21,initialize:r}})};return t(s.prototype,n.prototype,{SymbolsTable:s,copy:function(){return new this.SymbolsTable(this.constructors.$copy(),this.expression_symbols.$copy(),this.statement_symbols.$copy(),this.named_symbols.$copy())},named_expression:function(t,n){return this.named_symbols[t]=e.create(n),n.on_register&&n.on_register(this.named_symbols[t],this),this},declaration_expression:function(e,t){return this.register_expression(e,t,t.suffix)},literal_expression:function(e,t){return this.register_expression(e,t,"Literal")},binary_expression:function(e,t){return this.register_expression(e,t,t.suffix)},unary_expression:function(e,t){return this.register_expression(e,t)}}),s}),t.namespace("javascript.Scope",function(){var e=function(e,t){this.tokens=e,this.symbols=t,this.token_index=0,this.tokens_length=e.length};return e.prototype={Scope:e,$new:function(e){return new this.Scope(e,this.symbols)},parse:function(){var e=[];for(this.advance();this.current_expression;this.advance())e.push(this.statement());return e},advance:function(e){this.token_index<this.tokens_length?(this.current_expression=this.symbols.get_expression(this,this.tokens,this.token_index),e&&e!==this.current_expression.type&&this.current_expression.error(),this.token_index+=1):(this.last_expression=this.current_expression,this.current_expression=null)},statement:function(){var e=this.symbols.get_statement(this,this.tokens,this.token_index);return e.statement_denotation?e.statement_denotation(this):e},expression:function(e){var t,n;for(t=this.current_expression?this.current_expression.null_denotation(this):this.last_expression;this.current_expression&&e<this.current_expression.precedence;)n=this.current_expression,this.advance(),t=n.left_denotation(t,this);return t}},e}),t.namespace("javascript.Parser",function(){var e=function(e,t,n){this.Scope=n,this.symbols=t,this.tokenizer=e};return e.prototype={Parser:e,copy:function(){return new this.Parser(this.tokenizer.copy(),this.symbols.copy(),this.Scope)},parse:function(e){var t=this.tokenizer.parse(e);return new this.Scope(t,this.symbols).parse(t)}},e}),t.namespace("javascript.es5_tokenizer",["tokenizer.Tokenizer"],function(e){var t=new e("ECMA Script 5");return t.regions.register({type:"Comment",name:"Inline comment",start:"//",end:"\n"}).register({type:"Comment",name:"Multi line comment",start:"/*",end:"*/"}).register({type:"String",name:"Double quote string",start:'"',escape_char:"\\",end:'"'}).register({type:"String",name:"Single quote string",start:"'",escape_char:"\\",end:"'"}).register({type:"Parenthesis",name:"Parenthesis",start:"(",end:")",contains:[{type:"Block"},{type:"Array"},{type:"String"},{type:"RegExp"},{type:"Comment"},{type:"Parenthesis"},{type:"SpecialCharacter",chars:["-","_","+","*","%","&","|","$","?","`","=","!","<",">","\\",":",".",",",";"]}]}).register({type:"Array",name:"Array literal",start:"[",end:"]",contains:[{type:"Block"},{type:"Array"},{type:"String"},{type:"Comment"},{type:"Parenthesis"},{type:"SpecialCharacter",chars:["-","_","+","*","%","&","|","$","?","`","=","!","<",">",":",".",",",";"]}]}).register({type:"Block",name:"Block",start:"{",end:"}",contains:[{type:"Block"},{type:"Array"},{type:"String"},{type:"RegExp"},{type:"Comment"},{type:"Parenthesis"},{type:"SpecialCharacter",chars:["-","_","+","*","%","&","|","$","?","`","=","!","<",">","\\",":",".",",",";"]}]}).register({type:"RegExp",name:"RegExp",start:"/",escape_char:"\\",end:"/"}),t});t.namespace("javascript.es5_symbols",["javascript.SymbolsTable"],function(e){var t=new e,n=function(e){return e};t.register_constructor("VariableDeclarator",function(e){this.type=this.type,this.id=e,this.init=null,this.start=e.start}).register_constructor("CatchClause",function(){this.type=this.type}).register_constructor("SwitchCase",function(){this.type=this.type}).register_constructor("DefaultCase",function(){this.type=this.type,this.statements=[]}).register_constructor("GroupingExpression",function(e){this.type=this.type,this.expression=e.scope.expression(0),this.start=e.start,this.end=e.end},{precedence:20}).register_constructor("EmptyStatement",function(e){this.type=this.type,this.start=e.start,this.end=e.end}).register_constructor("ExpressionStatement",function(e){this.type=this.type,this.expression=e,this.start=e.start}),t.declaration_expression("Comment",{suffix:!1,protos:{type:"Comment",precedence:1,initialize:function(e,t){this.type=this.type,this.comment=e[t].value,this.start=e[t].start,this.end=e[t].end}}}).literal_expression("Number",{protos:{type:"Number",precedence:21,EXPONENTIAL_REGEX:/^e|E\d+$/,initialize:function(e,t,n){this.type=this.type,this.value=e[t].value,this.start=e[t].start,e[t+1]&&"SpecialCharacter"===e[t+1].type&&"."===e[t+1].value&&e[t+1].start.index===e[t].end.index&&(this.value+=".",n.token_index=t+=1),e[t+1]&&"Number"===e[t+1].type&&e[t+1].start.index===e[t].end.index&&(this.value+=e[t+1].value,n.token_index=t+=1),e[t+1]&&"Identifier"===e[t+1].type&&this.EXPONENTIAL_REGEX.test(e[t+1].value)&&e[t+1].start.index===e[t].end.index&&(this.value+=e[t+1].value,n.token_index=t+=1),this.end=e[t].end}}}).register_constructor("NullLiteral",function(e){this.type=this.type,this.start=e.start,this.end=e.end},{precedence:21}).named_expression("null",{on_register:function(e,t){e.NullLiteral=t.constructors.NullLiteral},null_denotation:function(e){return new this.NullLiteral(e)},left_denotation:n}).literal_expression("String",{protos:{type:"String",precedence:21,initialize:function(e,t){this.type=this.type,this.value=e[t].value,this.start=e[t].start,this.end=e[t].end}}}).register_constructor("BooleanLiteral",function(e){this.type=this.type,this.value=e.name,this.start=e.start,this.end=e.end});var r={on_register:function(e,t){e.BooleanLiteral=t.constructors.BooleanLiteral},null_denotation:function(e){return new this.BooleanLiteral(e)},left_denotation:n};t.named_expression("true",r).named_expression("false",r).literal_expression("RegExp",{protos:{type:"RegExp",precedence:21,REGEX_FLAGS:"gimuy",initialize:function(e,t,n){var r,s=t+1,i=0,a="";if(this.type=this.type,e[s]&&e[t].end.index===e[s].start.index&&"Identifier"===e[s].type){for(r=e[s].value,i=r.length-1;i>=0;--i)-1!==this.REGEX_FLAGS.indexOf(r.charAt(i))&&-1===a.indexOf(r.charAt(i))?a+=r.charAt(i):(a="",e[s].error("Invalid regular expression flags"));a&&(n.token_index+=1)}this.regex={pattern:e[t].value,flags:a},this.start=e[t].start,this.end=e[n.token_index].end}}}).declaration_expression("SpecialCharacter",{is:function(e){return";"===e.value},suffix:!1,protos:{type:"Terminator",initialize:function(e,t){this.type=this.type,this.operator=e[t].value,this.start=e[t].start,this.end=e[t].end}}}).register_constructor("SequenceExpression",function(e,t){this.type=this.type,this.expressions=t,this.start=e,this.end=t[t.length-1].end},{precedence:20}).declaration_expression("SpecialCharacter",{is:function(e){return":"===e.value},suffix:!1,protos:{type:"Delimiter",initialize:function(e,t){this.type=this.type,this.operator=e[t].value,this.start=e[t].start,this.end=e[t].end}}}).declaration_expression("SpecialCharacter",{is:function(e){return","===e.value},suffix:!1,protos:{type:"Comma",precedence:1,initialize:function(e,t){this.type=this.type,this.start=e[t].start,this.end=e[t].end},on_register:function(e,t){e.SequenceExpression=t.constructors.SequenceExpression},left_denotation:function(e,t){var n=[e];e:for(;t.current_expression;)if(n.push(t.expression(1)),t.current_expression)switch(t.current_expression.type){case"Comma":t.advance();break;case"Delimiter":case"Terminator":break e;default:t.advance()}return new this.SequenceExpression(e.start,n)}}});var s=function(e,t,n){this.type=this.type,this.scope=n.$new(e[t].children),this.start=e[t].start,this.end=e[t].end};t.register_constructor("ObjectLiteral",function(e,t){this.type=this.type,this.properties=t,this.start=e.start,this.end=e.end},{precedence:21}).register_constructor("Property",function(e,t,n){this.type=this.type,this.key=e,this.value=t,this.is_computed=n,this.start=e.start},{type:"Property",precedence:21}).declaration_expression("Block",{protos:{type:"Block",precedence:21,initialize:s,on_register:function(e,t){e.Property=t.constructors.Property,e.ObjectLiteral=t.constructors.ObjectLiteral},null_denotation:function(e){var t,n,r=[],s=0;for(e=this.scope,e.advance();e.current_expression;)t=e.expression(0),n="Identifier"!==t.type,"Delimiter"===e.current_expression.type&&e.advance(),r[s++]=new this.Property(t,e.expression(1),n),e.current_expression&&("Comma"===e.current_expression.type?e.advance():(e.advance("Comma"),e.advance()));return new this.ObjectLiteral(this,r)},left_denotation:function(e){switch(e.type){case"ObjectLiteral":case"FunctionExpression":return e}return console.log(111,e.type),this}}}).register_constructor("CallExpression",function(e,t){this.type=this.type,this.callee=e,this.arguments=[],this.start=e.start,this.end=t}).declaration_expression("Parenthesis",{protos:{type:"Parenthesis",precedence:19,initialize:s,call_expression:function(e){var t=new this.CallExpression(e,this.end);return this.get_arguments(this.scope,t.arguments,e),t},get_arguments:function(e,t){var n=0;for(e.advance();e.current_expression;)t[n++]=e.expression(1),e.current_expression&&("Comma"===e.current_expression.type?(e.advance(),e.current_expression||console.error("ERRORRR",e.current_expression)):console.error("ERRORRR2",e.current_expression))},on_register:function(e,t){e.CallExpression=t.constructors.CallExpression,e.GroupingExpression=t.constructors.GroupingExpression},null_denotation:function(){return this.scope.advance(),new this.GroupingExpression(this)},left_denotation:function(e){switch(e.type){case"Identifier":case"MemberExpression":case"FunctionExpression":return this.call_expression(e);case"NewExpression":return this.get_arguments(this.scope,e.arguments),e.end=this.end,e;case"GroupingExpression":return e}return"GroupingExpression"!==e.type&&console.log(222,e),this}}}).register_constructor("NewExpression",function(e,t){this.type=this.type,this.callee=t,this.arguments=[],this.start=e,this.end=t.end},{precedence:19}).named_expression("new",{on_register:function(e,t){e.NewExpression=t.constructors.NewExpression},null_denotation:function(e,t){var n=e.start;t.advance();var r=t.current_expression.null_denotation(t);e:for(;;){if(!(e=t.current_expression))break;switch(e.type){case"Identifier":case"MemberExpression":t.advance(),r=e.left_denotation(r,t);break;case"ParenthesisExpression":return t.current_expression.left_denotation(new this.NewExpression(n,r),t);default:r.precedence=18;break e}}return r}}).declaration_expression("SpecialCharacter",{is:function(e){return"."===e.value},protos:{type:"Member",precedence:19,initialize:function(){this.type=this.type},left_denotation:function(e,t){return this.object=e,this.property=t.expression(this.precedence),this.is_computed=!1,this.start=e.start,this.end=this.property.end,this}}}).register_constructor("ArrayLiteral",function(e,t){this.type=this.type,this.elements=t,this.start=e.start,this.end=e.end},{precedence:21}).declaration_expression("Array",{protos:{type:"SquareBracket",precedence:19,initialize:s,on_register:function(e,t){e.ArrayLiteral=t.constructors.ArrayLiteral,e.MemberExpression=t.constructors.MemberExpression},null_denotation:function(e){var t=[];for(e=this.scope,e.advance();e.current_expression;)"Comma"===e.current_expression.type?t.push(null):t.push(e.expression(1)),e.advance();return new this.ArrayLiteral(this,t)},left_denotation:function(e){if("ArrayLiteral"===e.type)return e;var t=new this.MemberExpression;return t.type=t.type,t.object=e,this.scope.advance(),t.property=this.scope.expression(0),t.is_computed=!0,t.start=e.start,t.end=this.end,t}}});var i={protos:{initialize:function(e,t){this.type=this.type,this.operator=e[t].value},left_denotation:function(e,t){return this.left=e,this.right=t.expression(this.precedence),this.start=e.start,this.end=this.right.end,this}},make:function(e,t){return this.protos.type=e,this.protos.precedence=t,this.protos}};t.unary_expression("SpecialCharacter",{is:function(e,t,n){switch(e.value){case"!":if(!t[n+1]||"SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value||t[n+1].start.index>e.end.index)return e.op="!",e.index=n,!0;break;case"~":if(!t[n+1]||"SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value||t[n+1].start.index>e.end.index)return e.op="~",e.index=n,!0;break;case"+":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"+"===t[n+1].value&&t[n+1].start.index===e.end.index)return e.op="++",e.index=n+1,!0;break;case"-":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"-"===t[n+1].value&&t[n+1].start.index===e.end.index)return e.op="--",e.index=n+1,!0}},protos:{type:"Unary",precedence:16,initialize:function(e,t,n){this.type=this.type,this.operator=e[t].op,this.argument=null,this.is_prefix=!0,this.start=e[t].start,this.end=e[t].end,n.token_index=e[t].index},null_denotation:function(e){return e.advance(),this.argument=e.expression(this.precedence),this.end=this.argument.end,this},left_denotation:function(e,t){switch(this.operator){case"--":case"++":return e===this?(this.argument=t.expression(this.precedence),this.end=this.argument.end):(this.start=e.start,this.argument=e,this.is_prefix=!1,this.precedence=17),this;default:console.error("ERROR")}}}});var a={on_register:function(e,t){e.UnaryExpression=t.constructors.UnaryExpression},null_denotation:function(e,t){var n=new this.UnaryExpression;return n.type=n.type,n.operator=e.name,t.advance(),n.argument=t.expression(n.precedence),n.is_prefix=!0,n.start=e.start,n.end=n.argument.end,n}};t.named_expression("void",a).named_expression("typeof",a).named_expression("delete",a),t.binary_expression("SpecialCharacter",{is:function(e,t,n){return"*"===e.value&&t[n+1]&&"SpecialCharacter"===t[n+1].type&&"*"===t[n+1].value&&t[n+1].start.index===e.end.index},protos:{type:"Exponentiation",precedence:15,initialize:function(e,t,n){this.type=this.type,n.token_index+=1},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e,t,n){switch(e.value){case"*":case"/":case"%":return!t[n+1]||("SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value||t[n+1].start.index>e.end.index)}},protos:i.make("Binary",14)}).binary_expression("SpecialCharacter",{is:function(e,t,n){switch(e.value){case"+":return!t[n+1]||("SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value&&"+"!==t[n+1].value||t[n+1].start.index>e.end.index);case"-":return!t[n+1]||("SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value&&"-"!==t[n+1].value||t[n+1].start.index>e.end.index)}},protos:i.make("Binary",13)}).binary_expression("SpecialCharacter",{is:function(e,t,n){switch(e.value){case"<":case">":return t[n+1]&&"SpecialCharacter"===t[n+1].type&&"="===t[n+1].value&&t[n+1].start.index===e.end.index?(e.op=e.value+"=",e.index=n+1,!0):(e.op=e.value,e.index=n,!0)}},protos:{type:"Comparision",precedence:11,initialize:function(e,t,n){this.type=this.type,this.operator=e[t].op,n.token_index=e[t].index},left_denotation:i.protos.left_denotation}}).register_constructor("InExpression",function(){this.type=this.type},{precedence:11,left_denotation:i.protos.left_denotation}).named_expression("in",{on_register:function(e,t){e.InExpression=t.constructors.InExpression},left_denotation:function(e,t){return(new this.InExpression).left_denotation(e,t)}}).register_constructor("InstanceofExpression",function(){this.type=this.type},{precedence:11,left_denotation:i.protos.left_denotation}).named_expression("instanceof",{on_register:function(e,t){e.InstanceofExpression=t.constructors.InstanceofExpression},left_denotation:function(e,t){return(new this.InstanceofExpression).left_denotation(e,t)}}).binary_expression("SpecialCharacter",{is:function(e,t,n){switch(e.value){case"=":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"="===t[n+1].value&&t[n+1].start.index===e.end.index)return t[n+2]&&"SpecialCharacter"===t[n+2].type&&"="===t[n+2].value&&t[n+2].start.index===t[n+1].end.index?(e.op="===",e.index=n+2,!0):(e.op="==",e.index=n+1,!0);break;case"!":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"="===t[n+1].value&&t[n+1].start.index===e.end.index)return t[n+2]&&"SpecialCharacter"===t[n+2].type&&"="===t[n+2].value&&t[n+2].start.index===t[n+1].end.index?(e.op="!==",e.index=n+2,!0):(e.op="!=",e.index=n+1,!0)}},protos:{type:"Equality",precedence:10,initialize:function(e,t,n){this.type=this.type,this.operator=e[t].op,n.token_index=e[t].index},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e,t,n){if("&"===e.value)return!t[n+1]||("SpecialCharacter"!==t[n+1].type||"&"!==t[n+1].value&&"="!==t[n+1].value||t[n+1].start.index>e.end.index)},protos:{type:"BitwiseAnd",precedence:9,initialize:function(){this.type=this.type},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e,t,n){if("^"===e.value)return!t[n+1]||("SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value||t[n+1].start.index>e.end.index)},protos:{type:"BitwiseXor",precedence:8,initialize:function(){this.type=this.type,this.operator="^"},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e,t,n){if("|"===e.value)return!t[n+1]||("SpecialCharacter"!==t[n+1].type||"|"!==t[n+1].value&&"="!==t[n+1].value||t[n+1].start.index>e.end.index)},protos:{type:"BitwiseOr",precedence:7,initialize:function(){this.type=this.type,this.operator="|"},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e,t,n){return"&"===e.value&&t[n+1]&&"SpecialCharacter"===t[n+1].type&&"&"===t[n+1].value&&t[n+1].start.index===e.end.index},protos:{type:"LogicalAnd",precedence:6,initialize:function(e,t,n){this.type=this.type,this.operator="&&",n.token_index+=1},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e,t,n){return"|"===e.value&&t[n+1]&&"SpecialCharacter"===t[n+1].type&&"|"===t[n+1].value&&t[n+1].start.index===e.end.index},protos:{type:"LogicalOr",precedence:5,initialize:function(e,t,n){this.type=this.type,this.operator="||",n.token_index+=1},left_denotation:i.protos.left_denotation}}).binary_expression("SpecialCharacter",{is:function(e){return"?"===e.value},protos:{type:"Conditional",precedence:4,initialize:function(){this.type=this.type},left_denotation:function(e,t){return this.test=e,this.consequent=t.expression(0),"Delimiter"===t.current_expression.type?t.advance():console.error("ERRRRRRRRRRRRRORRRR"),this.alternate=t.expression(0),this.start=e.start,this.end=this.alternate.end,this}}}).binary_expression("SpecialCharacter",{is:function(e,t,n){switch(e.value){case"=":if(!t[n+1]||"SpecialCharacter"!==t[n+1].type||"="!==t[n+1].value||t[n+1].start.index>e.end.index)return e.op="=",e.index=n,!0;break;case"+":case"-":case"*":case"/":case"%":case"&":case"^":case"|":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"="===t[n+1].value&&t[n+1].start.index===e.end.index)return e.op=e.value+"=",e.index=n+1,!0;break;case"*":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"*"===t[n+1].value&&t[n+1].start.index===e.end.index&&t[n+2]&&"SpecialCharacter"===t[n+2].type&&"="===t[n+2].value&&t[n+2].start.index===t[n+1].end.index)return e.op="**=",e.index=n+2,!0;break;case"<":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&"<"===t[n+1].value&&t[n+1].start.index===e.end.index&&t[n+2]&&"SpecialCharacter"===t[n+2].type&&"="===t[n+2].value&&t[n+2].start.index===t[n+1].end.index)return e.op="<<=",e.index=n+2,!0;break;case">":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&">"===t[n+1].value&&t[n+1].start.index===e.end.index&&t[n+2]&&"SpecialCharacter"===t[n+2].type&&"="===t[n+2].value&&t[n+2].start.index===t[n+1].end.index)return e.op=">>=",e.index=n+2,!0;break;case">>>=":if(t[n+1]&&"SpecialCharacter"===t[n+1].type&&">"===t[n+1].value&&t[n+1].start.index===e.end.index&&t[n+2]&&"SpecialCharacter"===t[n+2].type&&">"===t[n+2].value&&t[n+2].start.index===t[n+1].end.index&&t[n+3]&&"SpecialCharacter"===t[n+3].type&&"="===t[n+3].value&&t[n+3].start.index===t[n+2].end.index)return e.op=">>>=",e.index=n+3,!0}},protos:{type:"Assignment",precedence:3,initialize:function(e,t,n){this.type=this.type,this.operator=e[t].op,this.start=e[t].start,n.token_index=e[t].index},left_denotation:i.protos.left_denotation}}),t.declaration_expression("Identifier",{is:function(e,t,n){return"function"===e.value&&t[n+1]&&t[n+1].start.index>e.end.index},protos:{type:"Function",precedence:22,initialize:function(e,t){this.type=this.type,this.id=null,this.parameters=[],this.body=null,this.start=e[t].start,this.end=e[t].end},null_denotation:function(e){if(e.advance(),"Identifier"===e.current_expression.type&&(this.id=e.current_expression,e.advance("ParenthesisExpression")),"ParenthesisExpression"===e.current_expression.type){var t=this.parameters,n=e.current_expression.scope;for(n.advance();n.current_expression;)"Identifier"===n.current_expression.type?t.push(n.current_expression):n.current_expression.error(),n.advance(),n.current_expression&&("Comma"===n.current_expression.type?(n.advance(),n.current_expression||n.current_expression.error()):n.current_expression.error())}return e.advance("BlockExpression"),this.body=e.statement(),this.end=this.body.end,this}}}),t.register_statement("Identifier",{is:function(e){return"var"===e.name},suffix:!1,protos:{type:"VariableDeclaration",initialize:function(e,t,n){this.type=this.type,this.declarations=[],this.start=n.current_expression.start,n.advance();for(var r;n.current_expression;)switch("Identifier"!==n.current_expression.type&&n.current_expression.error(),r=this.declare(n.current_expression),n.advance(),"="===n.current_expression.operator&&(n.advance(),r.init=n.expression(1)),r.end=r.init?r.init.end:r.id.end,n.current_expression.type){case"Comma":n.advance();break;case"Terminator":return this.end=n.current_expression.end,this;default:n.current_expression.error()}},on_register:function(e,t){e.VariableDeclarator=t.constructors.VariableDeclarator},declare:function(e){return e=new this.VariableDeclarator(e),this.declarations.push(e),e}}}).register_statement("Comment",{suffix:!1,protos:{type:"Comment",initialize:function(e,t,n){this.type=this.type,this.comment=n.current_expression.comment,this.start=n.current_expression.start,this.end=n.current_expression.end}}}).register_statement("FunctionExpression",{suffix:!1,protos:{type:"FunctionDeclaration",statement_denotation:function(e){var t=e.current_expression.null_denotation(e);return t.type="FunctionDeclaration",t}}});var o={protos:{precedence:0,on_register:function(e,t){e.EmptyStatement=t.constructors.EmptyStatement,e.ExpressionStatement=t.constructors.ExpressionStatement},statement_denotation:function(e){if("Terminator"===e.current_expression.type&&!e.current_expression.left)return new this.EmptyStatement(e.current_expression);var t,n=e.current_expression;for("Identifier"===n.type&&(n=n.null_denotation(e));e.current_expression&&0<e.current_expression.precedence;)t=e.current_expression,e.advance(),n=t.left_denotation(n,e);if(!e.current_expression||"Terminator"===e.current_expression.type){var r=new this.ExpressionStatement(n);return r.end=(e.current_expression||n).end,r}console.log("ELSE ERRORRRR")}}};t.register_statement("Identifier",o).register_statement("Terminator",o).register_statement("NumberLiteral",o).register_statement("StringLiteral",o).register_statement("BooleanLiteral",o).register_statement("UnaryExpression",o).register_statement("MemberExpression",o).register_statement("SequenceExpression",o).register_statement("AssignmentExpression",o),t.register_statement("BlockExpression",{protos:{type:"Block",initialize:function(e,t,n){this.type=this.type,this.body=n.current_expression.scope.parse(),this.start=n.current_expression.start,this.end=n.current_expression.end}}}),t.register_statement("Identifier",{is:function(e){return"if"===e.name},protos:{type:"If",initialize:function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance("ParenthesisExpression"),n.current_expression.scope.advance(),this.test=n.current_expression.scope.expression(0),n.advance(),this.statement=n.statement(),t=n.token_index,n.advance(),n.current_expression&&"else"===n.current_expression.name?(n.advance(),this.alternate=n.statement()):(this.alternate=null,n.token_index=t),this.start=r,this.end=(this.alternate||this.statement).end}}}).register_constructor("ForInStatement",function(e,t,n,r){this.type=this.type,this.left=t,this.right=n,this.statement=r,this.start=e,this.end=r.end}).register_statement("Identifier",{is:function(e){return"for"===e.name},protos:{type:"For",initialize:function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance("ParenthesisExpression"),this.init=n.current_expression.scope,this.test=null,this.update=null,n.advance(),this.statement=n.statement(),this.start=r,this.end=this.statement.end},on_register:function(e,t){e.ForInStatement=t.constructors.ForInStatement,e.VariableDeclaration=t.constructors.VariableDeclaration},statement_denotation:function(){var e=this.init;if(e.advance(),e.current_expression&&"var"===e.current_expression.name){var t=new this.VariableDeclaration;if(t.type=t.type,t.declarations=[],t.start=e.current_expression.start,e.advance(),"Identifier"===e.current_expression.type){if(t.declare(e.current_expression),e.advance(),e.current_expression&&"in"===e.current_expression.name){e.advance();var n=e.expression(0);return e.current_expression&&console.error("ERRRRRRRRRRRRRR"),new this.ForInStatement(this.start,t,n,this.statement)}e.token_index=0,e.advance(),this.init=e.statement()}else console.error("ERRRRRRRRRRRRRR")}else this.init=e.expression(0);if("Terminator"===this.init.type&&(this.init=null),e.current_expression){if("Terminator"===e.current_expression.type&&(e.advance(),this.test=e.expression(0),"Terminator"===this.test.type&&(this.test=null),e.current_expression&&"Terminator"===e.current_expression.type))return e.advance(),this.update=e.expression(0),this;console.error("ERRRRRRRRRRRRRR")}else if("InExpression"===this.init.type)return e.advance(),e.current_expression&&console.error("ERRRRRRRRRRRRRR"),new this.ForInStatement(this.start,this.init.left,this.init.right,this.statement);console.error("ERRRRRRRRRRRRRR")}}}).register_statement("Identifier",{is:function(e){return"while"===e.name},protos:{type:"While",initialize:function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance("ParenthesisExpression"),n.current_expression.scope.advance(),this.test=n.current_expression.scope.expression(0),n.advance(),this.statement=n.statement(),this.start=r,this.end=this.statement.end}}}).register_statement("Identifier",{is:function(e){return"switch"===e.name},protos:{type:"Switch",initialize:function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance("ParenthesisExpression"),n.current_expression.scope.advance(),this.discriminant=n.current_expression.scope.expression(0),this.cases=[],n.advance("BlockExpression"),this.parse_cases(n.current_expression.scope,this.cases),this.start=r,this.end=n.current_expression.end},on_register:function(e,t){this.SwitchCase=t.constructors.SwitchCase,this.DefaultCase=t.constructors.DefaultCase},parse_cases:function(e,t){var n,r;for(e.advance("Identifier");e.current_expression;)switch(e.current_expression.name){case"case":case"default":for(r=e.current_expression.start,"case"===e.current_expression.name?(n=new this.SwitchCase,e.advance(),n.test=e.expression(0)):(n=new this.DefaultCase,e.advance()),"Delimiter"!==e.current_expression.type&&e.current_expression.error(),n.statements=[],n.start=r,n.end=e.current_expression.end;e.current_expression&&(e.advance(),
e.current_expression&&"case"!==e.current_expression.name&&"default"!==e.current_expression.name);)n.statements.push(e.statement());n.statements.length&&(n.end=n.statements[n.statements.length-1].end),t.push(n);break;default:e.current_expression.error()}}}}).register_statement("Identifier",{is:function(e,t,n){return"SpecialCharacter"===t[n].type&&":"===t[n].value},protos:{type:"Labeled",precedence:2,initialize:function(e,t,n){var r=n.current_expression.start;this.type=this.type,this.label=n.current_expression.name,n.token_index+=1,n.advance(),this.statement=n.statement(),this.start=r,this.end=this.statement.end}}}).register_statement("Identifier",{is:function(e){return"try"===e.name},protos:{type:"Try",initialize:function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance("BlockExpression"),this.block=n.statement(),n.advance("Identifier"),"catch"===n.current_expression.name?(this._catch(n),n.advance()):this.handler=null,"finally"===n.current_expression.name?(n.advance("BlockExpression"),this.finalizer=n.statement()):this.finalizer=null,this.handler||this.finalizer||console.error("Missing catch or finally after try"),this.start=r,this.end=n.current_expression.end},on_register:function(e,t){this.CatchClause=t.constructors.CatchClause},_catch:function(e){var t=new this.CatchClause,n=e.current_expression.start;e.advance("ParenthesisExpression"),e.current_expression.scope.advance(),t.param=e.current_expression.scope.expression(1),e.advance("BlockExpression"),t.block=e.statement(),t.start=n,t.end=t.block.end,this.handler=t}}});var p=function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance(),this.argument="Terminator"===n.current_expression.type?null:n.expression(0),this.start=r,this.end=n.current_expression.end};t.register_statement("Identifier",{is:function(e){return"throw"===e.name},protos:{type:"Throw",initialize:p}}).register_statement("Identifier",{is:function(e){return"return"===e.name},protos:{type:"Return",initialize:p}});var c=function(e,t,n){var r=n.current_expression.start;this.type=this.type,n.advance(),"Identifier"===n.current_expression.type?(this.label=n.current_expression,n.advance("Terminator")):this.label=null,this.start=r,this.end=n.current_expression.end};return t.register_statement("Identifier",{is:function(e){return"break"===e.name},protos:{type:"Break",initialize:c}}).register_statement("Identifier",{is:function(e){return"continue"===e.name},protos:{type:"Continue",initialize:c}}),t}).namespace("javascript.ES5_parser",["javascript.Scope","javascript.Parser","javascript.es5_tokenizer","javascript.es5_symbols"],function(e,t,n,r){return new t(n,r,e)}),t.namespace("javascript.es6_tokenizer",["javascript.es5_tokenizer"],function(e){var t=e.copy(),n=t.regions.hash;return t.language="ECMA Script 6",t.regions.register({type:"TemplateLiteral quasi string",start:null,escape_char:"\\",end:"${",until:!0,contained:!0}).register({type:"TemplateLiteral expression",start:"${",end:"}",contains:[{type:"Block"},{type:"Array"},{type:"String"},{type:"RegExp"},{type:"Comment"},{type:"Parenthesis"},{type:"SpecialCharacter",chars:["-","_","+","*","%","&","|","$","?","`","=","!","<",">","\\",":",".",",",";"]}]}).register({type:"TemplateLiteral",start:"`",end:"`",contains:[{type:"TemplateLiteral quasi string"},{type:"TemplateLiteral expression"}],keepend:!0}),n["{"][0].contains.push({type:"TemplateLiteral"}),n["("][0].contains.push({type:"TemplateLiteral"}),n["["][0].contains.push({type:"TemplateLiteral"}),t}),t.namespace("javascript.ES6_parser",["javascript.ES5_parser","javascript.es6_tokenizer"],function(e,t){return e=e.copy(),e.tokenizer=t,e.symbols.literal_expression("TemplateLiteral",{protos:{type:"Template",precedence:21,initialize:function(e,t,n){this.type=this.type,this.value=e[t].value,this.body=n.$new(e[t].children),this.start=e[t].start,this.end=e[t].end},null_denotation:function(){for(var e=new Array(this.body.tokens.length),t=this.body,n=0;n<e.length;++n)t.advance(),e[n]=t.current_expression;return this.body=e,this}}}).declaration_expression("TemplateLiteral expression",{protos:{type:"TemplateLiteral",precedence:21,initialize:function(e,t,n){this.type=this.type,this.expression=n.$new(e[t].children),this.expression.advance(),this.expression=this.expression.expression(0),this.start=e[t].start,this.end=e[t].end}}}).declaration_expression("TemplateLiteral quasi string",{suffix:!1,protos:{type:"TemplateLiteralString",precedence:21,initialize:function(e,t){this.type=this.type,this.value=e[t].value,this.start=e[t].start,this.end=e[t].end}}}).register_constructor("ExportDefaultDeclaration",function(e,t,n){this.type=this.type,this.declaration=n,this.start=e,this.end=t}).register_statement("Identifier",{is:function(e){return"export"===e.name},protos:{type:"Export",initialize:function(){this.type=this.type},on_register:function(e,t){e.ExportDefaultDeclaration=t.constructors.ExportDefaultDeclaration},statement_denotation:function(e){var t,n=e.current_expression.start;if(e.advance(),e.current_expression&&"default"===e.current_expression.name)if(e.advance(),e.current_expression){if("FunctionExpression"===e.current_expression.type)return t=e.current_expression.null_denotation(e),t.type="FunctionDeclaration",new this.ExportDefaultDeclaration(n,t.end,t);if(t=e.expression(0),"Terminator"===e.current_expression.type)return new this.ExportDefaultDeclaration(n,e.current_expression.end,t);console.error("Unexpected delimiter")}else console.error("ERRRRRRRRRRR export expression")}}}),e})}),e};